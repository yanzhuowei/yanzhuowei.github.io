---
title: 作用域、作用域链、闭包
date: 2020-11-21 11:42:36
author: 慕言
img: 
top: false
summary: 作用域、作用域链、闭包的认识
categories: JavaScript
tags:
  - 作用域、闭包
---
### 函数

> 函数就是一个方法或者一个功能体，就是把实现某个功能的代码放到一起进行封装;封装：减少页面中的冗余代码，提高代码重复使用率（低耦合高内聚）；

- 函数分为声明函数和函数执行
    - 声明函数：函数存储在堆中，堆中存储的是函数体代码字符串和键值对（例如：arguments:null,length:0 ,name: "fn"...等等；**初始化作用域（创建函数时当前执行上下文存储变量的地方）**
    - 函数执行：1、查找调用函数的代码，开辟一块 __全新的栈内存（函数内部的变量不能被外部访问，只能return出去）__ ，建立函数上下文，进栈执行；2、初始化this指向 3、初始化作用域链 4、创建变量对象VO (1、arguments对象 2、创建形参变量并赋值 3、有变量提升话变量提升    ) 5、代码执行

### 作用域

> 作用域也就是**创建函数时**当前执行上下文存储变量的地方 **（VO/AO）**

### 作用域链

> 变量取值的过程，先在自己执行上下文中的变量对象中找看是否是自己AO中的私有变量，找不到就去上级作用域查找，有则停止，无就继续，一直找到全局作用域。

### 闭包

> **函数执行形成一个全新的执行上下文，进栈执行后所创建的一些变量被外部所引用，不能出栈销毁，就形成了闭包。**
> 作用：延长了局部变量的生命周期，保护全不被污染
> 缺点：函数不能被出栈销毁，频繁使用会造成内存泄漏问题。
> 解决方法：手动销毁 fn=null